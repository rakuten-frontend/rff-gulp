# ワークフロー

ビルドシステムとフロントエンド開発で使うモジュールは、全て[npm](https://www.npmjs.com/)で管理されています。  
もし既存のプロジェクトをGitリポジトリからクローンしてきた場合は、最初に`npm install`を実行してください。

## 1. 開発サーバを立ち上げる
まず、開発用のローカルサーバを起動します。

```
$ npm start
```

このコマンドは、以下のタスクを行います。

- [Browsersync](https://www.browsersync.io/)サーバを立ち上げ、`http://localhost:3000`をWebブラウザで表示する
- ソースコードを保存するたびに、適宜リントやコンパイルを実行する
- ページが更新された際、自動的にブラウザをリロードする

コンパイラ／サーバ／リントのログは、ターミナル上で確認できます。  
このプロセスを終了させたいときは、<kbd>Cntl</kbd> + <kbd>C</kbd>を押してください。

## 2. Webアプリケーションを開発する
**"app"**ディレクトリ内のファイルを編集して、Webアプリケーションを開発します。

**Tips:**

- [Sassパーシャルモジュールを作成する](sass-modules.md)
- [JavaScriptモジュールを作成する](js-modules.md)
- [CSS/Sassライブラリを使用する](css-libraries.md)
- [JavaScriptライブラリを使用する](js-libraries.md)
- [jQueryプラグインを使用する](jquery-plugins.md)
- [Browserifyを使わずにJavaScriptを読み込む](js-without-browserify.md)

## 3. プロジェクトをビルドする
編集が終わったら、Gitコミットする前にプロジェクトをビルドしましょう。

```
$ npm run build
```

このコマンドを実行すると、

- 最初にソースコードをテストする
- ファイルをコンパイル／最適化して、**"dist"**ディレクトリ内に出力する

**注意:** ディレクトリの使い分け

- **"app"** - 開発用のファイル。ソースコードや元となるアセットが含まれています。
- **"dist"** - 本番環境用のファイル。Gitのメインブランチでは管理しません。ファイルを直接編集しないでください。

## 4. コンテンツをプレビューする
ビルドされたコンテンツを確認しましょう。
"dist"ディレクトリを使ってローカルサーバを立ち上げます。

```
$ npm run serve:dist
```

問題がなければ、Gitにコミットして、リモートリポジトリへとプッシュします。

## 5. ビルドされたファイルをデプロイする
デプロイ用のブランチにビルドされたファイルを転送します。

```
$ npm run deploy
```

デフォルトでは、"dist"のファイルはリモートリポジトリの"gh-pages"ブランチにプッシュされます。  
詳細は、[デプロイ用ブランチを作成する](deploy-branch.md)を参照してください。
